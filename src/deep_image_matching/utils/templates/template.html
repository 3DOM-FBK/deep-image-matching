<!DOCTYPE html>

<html>

<head>
    <meta charset="utf-8">
    <!--<script src='./lib/bindings/utils.js'></script>
        <script src="./lib/vis-9.1.2/vis-network.min.js"></script>
        <link rel="stylesheet" href="./lib/vis-9.1.2/vis-network.css">
        <link rel="stylesheet" href="./lib/vis-9.1.2/template_style.css">-->

    <script>
        {% include 'lib/bindings/utils.js' %}
    </script>
    <style>
        {% include 'lib/vis-9.1.2/vis-network.css' %}
    </style>
    <style>
        {% include '/lib/vis-9.1.2/template_style.css' %}
    </style>
    <script>
        {% include 'lib/vis-9.1.2/vis-network.min.js' %}
    </script>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js" integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf" crossorigin="anonymous"></script>


</head>


<body>
    <div id="container">
        <div id="sidePanel">
            <div id="sideButton" onclick="toggleSidePanel()">☰ View graph details</div>
            <p>
                ⓘ </br>
                Hover on nodes to show the <b>image name</b>.</br>
                Click on nodes to show the <b>image preview</b> and to highlight connections.</br>
                Hover on edges to show the number of <b>matches</b> between a pair of images.</br></br>

                Nodes are positioned using the <b>Fruchterman-Reingold</b> force-directed algorithm <a href="https://networkx.org/documentation/stable/reference/generated/networkx.drawing.layout.spring_layout.html">[1]</a>, the closer the nodes, the stronger the connection.
                Images are grouped into <b>communities</b>. Nodes share more matches with other nodes inside the community and fewer with nodes outside.</br></br>
                Click on a community in the list to <b>cluster</b> the graph.</br>
                Click on the cluster to <b>reopen</b> the community. </br> </br>
                Maximum Spanning Tree (MST) and Expanded MST are created in the results folder. </br>
                A list of images 'communities.csv' grouped by community is automatically created in the results folder. </br>
                If present, images which have a significantly lower <b>clustering coefficient</b> <a href="https://networkx.org/documentation/stable/reference/algorithms/generated/networkx.algorithms.cluster.clustering.html#networkx.algorithms.cluster.clustering">[2]</a> than the average of their community are represented with larger size. These may be community outliers, so check them first! </br></br>
                <b>Not aligned images</b> (if available) are shown in the list below and on the side of the graph.

            </p>
            <table>
                <thead>
                </thead>
                <tbody>
                    <tr class="inforow">
                        <td>Edges: </td>
                    </tr>
                    <tr class="inforow"  onclick="toggleRows(this, 'comm')">
                        <td>Communities: </td>
                    </tr>
                    <tr class="inforow">
                        <td>Aligned images: </td>
                    </tr>
                    <tr class="inforow" onclick="toggleRows(this, 'na')">
                        <td>Not aligned images: </td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div id="mynetwork">
        </div>

        <div id="reopenButton" onclick="reopenSidePanel()">☰ Graph info</div>
    </div>

    {% if nodes|length > 100 and physics_enabled %}
    <div id="loadingBar">
        <div class="outerBorder">
            <div id="text">0%</div>
            <div id="border">
                <div id="bar"></div>
            </div>
        </div>
    </div>
    {% endif %} 
    {% if conf %}
    <div id="config"></div>
    {% endif %}
    <script>{%  include 'lib/bindings/utils.js' %}</script>
    <script type="text/javascript">
        drawGraph();
        populateSidePanel();
    </script>
</body>

</html>